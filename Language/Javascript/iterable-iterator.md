## Iteration Protocol

- ES6ì—ì„œ ìƒˆë¡œ ë„ì…ëœ ë°ì´í„° ì»¬ë ‰ì…˜ ê°ì²´(ëŒ€í‘œì ìœ¼ë¡œ Array)ë¥¼ ìˆœíšŒí•˜ê¸° ìœ„í•œ Protocol
- í•´ë‹¹ í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•œ ê°ì²´ë§Œì´ `forâ€¦of`ë¬¸ìœ¼ë¡œ ìˆœíšŒí•  ìˆ˜ ìˆê³ , Spread ë¬¸ë²•ì˜ í”¼ì—°ì‚°ìê°€ ë  ìˆ˜ ìˆë‹¤.
- **Iteration Protocolì€ Iterable Protocolê³¼ Iterator Protocolì„ ì´ì¹­í•œë‹¤.**

## ì´í„°ëŸ¬ë¸”(Iterable)

- ìë£Œë¥¼ ë°˜ë³µí•  ìˆ˜ ìˆëŠ” ê°ì²´
    - í”íˆ ì‚¬ìš©í•˜ëŠ” ë°°ì—´ì´ ëŒ€í‘œì ì¸ ì´í„°ëŸ¬ë¸” ê°ì²´ì´ë‹¤.
- `Symbol.iterator` ë©”ì„œë“œë¥¼ ê°€ì§„ ê°ì²´
    - ì´í„°ë ˆì´í„°ë¥¼ ë¦¬í„´í•˜ëŠ” `[Symbole.iterator]()` ë©”ì„œë“œë¥¼ ê°€ì§„ë‹¤.
    - ë°°ì—´ì˜ ê²½ìš° `Array.prototype`ì˜ `Symbol.iterator`ë¥¼ ìƒì†ë°›ê¸° ë•Œë¬¸ì— ì´í„°ëŸ¬ë¸”ì´ë‹¤.
- ë³„ë„ë¡œ `Symbol.iterator` ë©”ì„œë“œë¥¼ ì •ì˜í•´ì£¼ê±°ë‚˜ í”„ë¡œí† íƒ€ì… ìƒì†ì„ í†µí•´ í•´ë‹¹ ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆë‹¤ë©´ Iterable Protocolì˜ ì¡°ê±´ì„ ì¶©ì¡±í•˜ì—¬ Iterableì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.
- Iterable ê°ì²´ëŠ” `forâ€¦of`ë¬¸ìœ¼ë¡œ ìˆœíšŒí•  ìˆ˜ ìˆê³ , Spread ë¬¸ë²•ì˜ í”¼ì—°ì‚°ìë¡œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.
- ëŒ€í‘œì ìœ¼ë¡œ Array ê°ì²´ê°€ ìˆë‹¤.

### ì´í„°ëŸ¬ë¸” ì§€ì› ê°ì²´

> Array, String, Map, Set, TypedArray(Int8Array, Uint8Array, Uint8ClampedArray, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array), DOM data structure(NodeList, HTMLCollection), Arguments
> 

## ì´í„°ë ˆì´í„°(Iterator)

```tsx
const array = [1, 2, 3, 4, 5];

const iterator = array[Symbol.itrator]()
// Symbol.itratorë¥¼ í˜¸ì¶œí•´ì„œ ë°˜í™˜ëœ iteratorë¥¼ ë°›ëŠ”ë‹¤.

console.log(iterator.next()); //ë°˜ë³µ
// { value: 1, done: false }
// { value: 2, done: false }
// { value: 3, done: false }
// { value: 4, done: false }
// { value: 5, done: false }
// { value: undefined, done: true }
```

- ì´í„°ëŸ¬ë¸” ê°ì²´ì˜ `Symbol.iterator` ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë©´ `Iterator` ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
- `{value: ê°’, done: true/false}` í˜•íƒœì˜ ì´í„°ë ˆì´í„° ê°ì²´ë¥¼ ë¦¬í„´í•˜ëŠ” `next()` ë©”ì„œë“œë¥¼ ê°€ì§„ ê°ì²´
    - ë°˜í™˜ëœ Iterator ê°ì²´ëŠ” next ë©”ì„œë“œë¥¼ ì†Œìœ í•˜ê³  ìˆë‹¤.
    - **next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ Iterator Result ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤ë©´ Iterator Protocolì„ ì¶©ì¡±í•˜ì—¬ Iteratorë¼ê³  í•  ìˆ˜ ìˆë‹¤.**
    - next ë©”ì„œë“œë¡œ ìˆœí™˜í•  ìˆ˜ ìˆëŠ” ê°ì²´ì´ë©°, `Symbol.iterator`ì•ˆì— ì •ì˜ë˜ì–´ ìˆë‹¤.
- Iterator Result ê°ì²´ëŠ” valueì™€ done í”„ë¡œí¼í‹°ë¥¼ ê°–ê³  ìˆìœ¼ë©°, **valueëŠ” í˜„ì¬ ìˆœíšŒí•˜ëŠ” ê°’ì„ ê°–ê³  ìˆê³ , doneì€ ìˆœíšŒê°€ ì–¸ì œ ëë‚˜ëŠ”ì§€ ì•Œë ¤ì¤€ë‹¤.**
    - next ë©”ì„œë“œëŠ” ë°˜ë³µì ìœ¼ë¡œ í˜¸ì¶œë˜ë‹¤ê°€ ëª¨ë“  ìš”ì†Œë¥¼ ìˆœíšŒí•˜ë©´ value í”„ë¡œí¼í‹°ëŠ” undefined, done í”„ë¡œí¼í‹°ëŠ” trueê°€ ë˜ì–´ ìˆœíšŒë¥¼ ì¢…ë£Œí•œë‹¤.

## Symbol.iterator

- ë‹¤ìŒì€ range ê°ì²´ë¥¼ ì´í„°ëŸ¬ë¸” ê°ì²´ë¡œ ë§Œë“œëŠ” ê³¼ì •ì´ë‹¤.
    
    ```tsx
    let range = { // 1) ê°ì²´ ìƒì„±
      from: 1,
      to: 5
    };
    
    range[Symbol.iterator] = function() { // 2) ìƒˆë¡œìš´ í‚¤:ë°¸ë¥˜ ë¥¼ ì¶”ê°€í•œë‹¤. í‚¤ëŠ” ë³€ìˆ˜í˜•íƒœ, ë°¸ë¥˜ëŠ” í•¨ìˆ˜ì´ë‹¤.
    
        return { // ê°ì²´ë¥¼ ë¦¬í„´í•œë‹¤. ê·¸ëŸ°ë° ì¢€ íŠ¹ë²½í•  í˜•íƒœì˜ ê°ì²´
          current: this.from,
          last: this.to,
    
          next() { // 3) next() ì •ì˜
            if (this.current <= this.last) {
              return { done: false, value: this.current++ }; 
              // 4) {value : ê°’ , done : true/false} í˜•íƒœì˜ ì´í„°ë ˆì´í„° ê°ì²´ë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤.
            } else {
              return { done: true };
            }
          }
        };
    };
    ```
    
    1. í‰ë²”í•œ range ê°ì²´ë¥¼ ë§Œë“ ë‹¤.
    2. ìš°ë¦¬ê°€ í”íˆ ì“°ëŠ” ê°ì²´ì— ìƒˆë¡œìš´ `key : value`ë¥¼ ì¶”ê°€í•˜ê³  ì‹¶ì„ ë•Œ, `range[key] = value`ë¥¼ í†µí•´ `Symbol.iterator` í‚¤ê°’ê³¼ í•¨ìˆ˜ë¡œ ë°¸ë¥˜ë¥¼ ì§€ì •í•´ ë„£ì—ˆë‹¤.
    3. ì¶”ê°€í•œ í•¨ìˆ˜ëŠ” ì–´ë– í•œ íŠ¹ë³„í•œ ê°ì²´ë¥¼ return í•˜ê²Œ ë˜ì–´ ìˆê³ , ì´ ê°ì²´ ì•ˆì— next()ë¼ëŠ” ë©”ì„œë“œë¥¼ ì •ì˜í–ˆë‹¤.
    4. ìµœì¢…ì ìœ¼ë¡œ `{value: ê°’, done: true/false}` í˜•íƒœì˜ ì´í„°ë ˆì´í„° ê°ì²´ë¥¼ return í•œë‹¤.

### ì´í„°ëŸ¬ë¸”, ì´í„°ë ˆì´í„° êµ¬ë¶„

- **ì´í„°ëŸ¬ë¸” ê°ì²´ëŠ” range**ì´ë‹¤.
    - `Symbol.iterator` ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤.
- **ì´í„°ë ˆì´í„° ê°ì²´ëŠ” Symbol.iterator() ë©”ì„œë“œê°€ ë¦¬í„´í•œ ê°ì²´ê°€ ë°”ë¡œ ì´í„°ë ˆì´í„°!**
    - í•´ë‹¹ ê°ì²´ ì•ˆì—ëŠ” `{value: ê°’, done: true/false}`ë¥¼ ë¦¬í„´í•˜ëŠ” next() ë©”ì„œë“œê°€ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

## ì´í„°ëŸ¬ë¸” ê°ì²´ ìˆœíšŒí•˜ê¸°

- ëŒ€í‘œì ìœ¼ë¡œ `forâ€¦of` ë¬¸ì´ ìˆë‹¤.
- ì´ëŸ¬í•œ ë°˜ë³µë¬¸/ì—°ì‚°ìë“¤ì€ Iterable ê°ì²´ì—ì„œ Iteratorë¥¼ ì¡°ì‘í•˜ì—¬ Iterator resultë¥¼ ì°¸ì¡°í•´ ëª…ë ¹ì„ ì‹¤í–‰í•œë‹¤.

### ìˆœíšŒ ê³¼ì •

```tsx
let range = { // ê°ì²´ ìƒì„±
  from: 1,
  to: 5
};

// 1. for..of ìµœì´ˆ í˜¸ì¶œ ì‹œ, Symbol.iteratorê°€ í˜¸ì¶œë©ë‹ˆë‹¤.
range[Symbol.iterator] = function() {

  // Symbol.iteratorëŠ” ì´í„°ë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
  // 2. ì´í›„ for..ofëŠ” ë°˜í™˜ëœ ì´í„°ë ˆì´í„° ê°ì²´ë§Œì„ ëŒ€ìƒìœ¼ë¡œ ë™ì‘í•˜ëŠ”ë°, ì´ë•Œ ë‹¤ìŒ ê°’ë„ ì •í•´ì§‘ë‹ˆë‹¤.
  return {
    current: this.from,
    last: this.to,

    // 3. for..of ë°˜ë³µë¬¸ì— ì˜í•´ ë°˜ë³µë§ˆë‹¤ next()ê°€ í˜¸ì¶œë©ë‹ˆë‹¤.
    next() {
      // 4. next()ëŠ” ê°’ì„ ê°ì²´ {done:.., value :...}í˜•íƒœë¡œ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.
      if (this.current <= this.last) {
        return { done: false, value: this.current++ }; // ìˆœíšŒ ì§„í–‰
      } else {
        return { done: true }; // ìˆœíšŒ ì¢…ë£Œ
      }
    }
  };
};

// ì´ì œ ì˜ë„í•œ ëŒ€ë¡œ ë™ì‘í•©ë‹ˆë‹¤!
for (let num of range) {
  alert(num); // 1, 2, 3, 4, 5
}
```

1. `forâ€¦of`ê°€ ì‹œì‘ë˜ìë§ˆì `forâ€¦of`ëŠ” `Symbol.iterator`ë¥¼ í˜¸ì¶œí•œë‹¤.
2. ì´í›„ `forâ€¦of`ëŠ” ë°˜í™˜ëœ ê°ì²´(ì´í„°ë ˆì´í„°)ë§Œì„ ëŒ€ìƒìœ¼ë¡œ ë™ì‘í•œë‹¤.
3. `forâ€¦of`ì— ë‹¤ìŒ ê°’ì´ í•„ìš”í•˜ë©´, `forâ€¦of`ëŠ” ì´í„°ë ˆì´í„°ì˜ `next()` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.
4. `next()` ì˜ ë°˜í™˜ê°’ì€ `{value: any, done: boolean}`ê³¼ ê°™ì€ í˜•íƒœì´ë‹¤.

## ìœ ì‚¬ë°°ì—´ vs ì´í„°ëŸ¬ë¸”

- ìœ ì‚¬ ë°°ì—´: ì¸ë±ìŠ¤ì™€ length í”„ë¡œí¼í‹°ê°€ ìˆì–´ ë°°ì—´ì²˜ëŸ¼ ë³´ì´ëŠ” ê°ì²´
- ë‹¤ìŒ ì˜ˆì‹œëŠ” ìœ ì‚¬ ë°°ì—´ ê°ì²´ì´ë‹¤.
    
    ```tsx
    let arrayLike = { // ì¸ë±ìŠ¤ì™€ lengthí”„ë¡œí¼í‹°ê°€ ìˆìŒ => ìœ ì‚¬ ë°°ì—´
      0: "Hello",
      1: "World",
      length: 2
    };
    
    for (let item of arrayLike) {} // Symbol.iteratorê°€ ì—†ìœ¼ë¯€ë¡œ ì—ëŸ¬ ë°œìƒ
    ```
    
- ì´í„°ëŸ¬ë¸”ê³¼ ìœ ì‚¬ë°°ì—´ì€ ë°°ì—´ì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— push, pop ë“±ì˜ ë©”ì„œë“œë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.

## ì´í„°ëŸ¬ë¸” ê°ì²´ ì¢…ë¥˜

### ë¬¸ìì—´

```tsx
for (let char of "test") {
  // ê¸€ì í•˜ë‚˜ë‹¹ í•œ ë²ˆ ì‹¤í–‰ë©ë‹ˆë‹¤(4íšŒ í˜¸ì¶œ).
  alert( char ); // t, e, s, tê°€ ì°¨ë¡€ëŒ€ë¡œ ì¶œë ¥ë¨
}
```

- ë°°ì—´ê³¼ ë¬¸ìì—´ì€ ê°€ì¥ ê´‘ë²”ìœ„í•˜ê²Œ ì“°ì´ëŠ” ë‚´ì¥ ì´í„°ëŸ¬ë¸”ì´ë‹¤.

### Map, Set

- ì¸ë±ìŠ¤ë¡œ ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œì„ ë”°ë¥¸ë‹¤.
- ìì²´ì ìœ¼ë¡œ ë‚´ì¥ `forEach()` ë©”ì„œë“œë¥¼ ì§€ì›í•œë‹¤.

## ì°¸ê³  ìë£Œ

- [https://velog.io/@kimjeongwonn/ì´í„°ëŸ¬ë¸”ì´í„°ë ˆì´í„°ì œë„¤ë ˆì´í„°-ë³µìŠµ](https://velog.io/@kimjeongwonn/%EC%9D%B4%ED%84%B0%EB%9F%AC%EB%B8%94%EC%9D%B4%ED%84%B0%EB%A0%88%EC%9D%B4%ED%84%B0%EC%A0%9C%EB%84%A4%EB%A0%88%EC%9D%B4%ED%84%B0-%EB%B3%B5%EC%8A%B5)
- [https://inpa.tistory.com/entry/JS-ğŸ“š-ì´í„°ëŸ¬ë¸”-ì´í„°ë ˆì´í„°-ğŸ’¯ì™„ë²½-ì´í•´](https://inpa.tistory.com/entry/JS-%F0%9F%93%9A-%EC%9D%B4%ED%84%B0%EB%9F%AC%EB%B8%94-%EC%9D%B4%ED%84%B0%EB%A0%88%EC%9D%B4%ED%84%B0-%F0%9F%92%AF%EC%99%84%EB%B2%BD-%EC%9D%B4%ED%95%B4)